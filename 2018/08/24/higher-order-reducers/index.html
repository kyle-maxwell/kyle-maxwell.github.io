<!doctype html>
<html lang="en-US">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Eliminating Boilerplate and Increasing Reusability with Higher-Order Reducers — GoDaddy Engineering Blog</title>
  <meta name="description" content="Information from our engineering team about the technology and tools we use to create software which empowers small businesses around the world to build and market their digital identities.
">

  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
  <link rel="stylesheet" href="/engineering/assets/css/main.css">

  <meta name="theme-color" content="#4095e8">
  <meta name="msapplication-TileColor" content="#4095e8">
  <link rel="apple-touch-icon" sizes="180x180" href="/engineering/assets/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/engineering/assets/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/engineering/assets/images/favicon-16x16.png">
  <link rel="manifest" href="/engineering/site.webmanifest">
  <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/engineering/feed.xml" title="GoDaddy Engineering Blog" />

  
  <link rel="canonical" href="http://localhost:4000/2018/08/24/higher-order-reducers/">
  

  <meta property="og:locale" content="en_US">
  <meta property="og:site_name" content="GoDaddy Engineering Blog">
  <meta property="og:url" content="http://localhost:4000/2018/08/24/higher-order-reducers/">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@GodaddyOSS">

  
  <meta property="og:image" content="http://localhost:4000/assets/images/redux-logo.png">
  

  
  <meta property="og:title" content="Eliminating Boilerplate and Increasing Reusability with Higher-Order Reducers — GoDaddy Engineering Blog">
  

  
  <meta property="og:description" content="My team has changed the way we write our redux reducers, choosing a more dynamic approach than the common switch statement. Creating reducers with higher-order factory functions gives us some great benefits. They can make the process of writing reducers faster and they're also flexible functions that can be used to generalize patterns and reduce repetition.">
  

  <link rel="preload" href="//img1.wsimg.com/ux/fonts/boing/1.0/Boing-Bold.woff2" as="font" type="font/woff2" crossOrigin />
  <style>
  @font-face {
    font-family: Boing-Bold;
    src: url(//img1.wsimg.com/ux/fonts/boing/1.0/Boing-Bold.woff2) format("woff2"), url(//img1.wsimg.com/ux/fonts/boing/1.0/Boing-Bold.woff) format("woff");
    font-display: swap;
  }
  </style>
  <link rel="preload" href="//img1.wsimg.com/ux/fonts/sherpa/1.0/gdsherpa-bold.woff2" as="font" type="font/woff2" crossOrigin />
  <style>
  @font-face {
    font-family: gdsherpa;
    src: url(//img1.wsimg.com/ux/fonts/sherpa/1.0/gdsherpa-bold.woff2) format("woff2"), url(//img1.wsimg.com/ux/fonts/sherpa/1.0/gdsherpa-bold.woff) format("woff");
    font-weight: 700;
    font-display: swap;
  }
  </style>
  <link rel="preload" href="//img1.wsimg.com/ux/fonts/sherpa/1.0/gdsherpa-regular.woff2" as="font" type="font/woff2" crossOrigin />
  <style>
  @font-face {
    font-family: gdsherpa;
    src: url(//img1.wsimg.com/ux/fonts/sherpa/1.0/gdsherpa-regular.woff2) format("woff2"), url(//img1.wsimg.com/ux/fonts/sherpa/1.0/gdsherpa-regular.woff) format("woff");
    font-display: swap;
  }
  </style>
</head>

  <body class="layout--post page--higher-order-reducers">
    <nav class="navbar utility-bar navbar-dark bg-theme-grey-dark px-3 py-0">
  <a class="navbar-brand pt-1 pb-0" href="https://www.godaddy.com">
    <svg class="logo-mark logo-mark-white" height="18" viewBox="0 0 367.7 78.1" xmlns="http://www.w3.org/2000/svg"><path class="logo-mark-color" d="M95.3 38.6c0-4.6-3.6-8.4-8.3-8.4-4.6 0-8.3 3.8-8.3 8.4s3.6 8.3 8.3 8.3 8.3-3.7 8.3-8.3m14.4.1c0 11.9-10.1 21.4-22.6 21.4-12.6 0-22.6-9.5-22.6-21.4 0-12 10.1-21.6 22.6-21.6 12.5-.1 22.6 9.6 22.6 21.6M154.8 30c0-8-5.6-15-13.9-15h-11.5v30.3h11.5c8.3 0 13.9-7.3 13.9-15.3m15.5 0c0 17.1-12.1 28.8-29.1 28.8h-24.6c-1.2 0-2.1-.9-2.1-2V3.4c0-1.1.9-2 2.1-2h24.6c17.1.1 29.1 11.5 29.1 28.6M194.4 46.9c4.6 0 8.3-3.8 8.3-8.4s-3.6-8.4-8.3-8.4c-4.6 0-8.3 3.8-8.3 8.4 0 4.7 3.7 8.4 8.3 8.4M192.2 17c4.9 0 8.8 1.8 10.5 4.3v-1.2c0-1.1.9-1.9 1.9-1.9H215c1.1 0 1.9.8 1.9 1.9v36.8c0 1.1-.8 1.9-1.9 1.9h-10.3c-1.1 0-1.9-.8-1.9-1.9v-1.2c-1.7 2.5-5.7 4.3-10.6 4.3-10.4 0-20.4-8.3-20.4-21.6s10-21.4 20.4-21.4M241.4 46.9c4.6 0 8.3-3.8 8.3-8.4s-3.6-8.4-8.3-8.4c-4.6 0-8.3 3.8-8.3 8.4 0 4.7 3.7 8.4 8.3 8.4M238.9 17c5 0 8.9 1.9 10.7 4.1V3.4c0-1.1.9-1.9 1.9-1.9H262c1.1 0 1.9.8 1.9 1.9V57c0 1.1-.8 1.9-1.9 1.9h-10.3c-1.1 0-1.9-.8-1.9-1.9v-1.2c-2.1 2.5-5.7 4.3-10.6 4.3-10.4 0-20.4-8.3-20.4-21.6S228.7 17 238.9 17M288.4 46.9c4.6 0 8.3-3.8 8.3-8.4s-3.6-8.4-8.3-8.4c-4.6 0-8.3 3.8-8.3 8.4.1 4.7 3.7 8.4 8.3 8.4M286 17c5 0 8.9 1.9 10.7 4.1V3.4c0-1.1.9-1.9 1.9-1.9H309c1.1 0 1.9.8 1.9 1.9V57c0 1.1-.8 1.9-1.9 1.9h-10.3c-1.1 0-1.9-.8-1.9-1.9v-1.2c-2.1 2.5-5.7 4.3-10.6 4.3-10.4 0-20.4-8.3-20.4-21.6S275.7 17 286 17M345.5 64.7c-2.6 8.6-8.6 13.4-18 13.4-5.1 0-10.1-1.7-13.3-4.5-.5-.5-.8-1.1-.8-1.7 0-.5.2-1.1.7-1.7l3.9-5.9c.6-.8 1.5-.9 1.7-.9.9 0 1.3.2 2.1.8 1.2.8 2.9 1.8 4.8 1.8 1.6 0 3.7-.7 4.5-3.1l1.3-4.1H326c-1.3 0-2.1-.9-2.5-2L313 21.5c-.2-.9-.3-1.4-.3-1.7 0-.8.6-1.5 1.7-1.5h12.4c1.1 0 1.7 1 2 2l6.9 25.4h.5l5.5-25.4c.2-1 .9-2 2-2h12.6c1.2 0 1.7.7 1.7 1.5 0 .3-.1.8-.3 1.7l-12.2 43.2M49.7 50.9c-5 6.9-13.2 9.2-20.5 9.2C12.4 60.1 0 47.6 0 30.2.1 13.5 13.5.2 31 .2c13 0 23.4 5.5 28.1 16 .6 1.2 1 3.2-2.5 3.8l-9.2 1.6c-2.1.4-3.3-1-3.7-1.6-2.7-3.7-7.1-6.2-12.4-6.2-9.2 0-15.7 7-15.7 16.3 0 10.3 7.4 16.3 15.5 16.3 5.4 0 9.8-2 12.7-5.8h-8.1c-1.2 0-2.1-.9-2.1-2v-7.7c0-1.1.9-2 2.1-2h24.7c1.2 0 2.1.9 2.1 2v25.9c0 1.1-.9 2-2.1 2h-8.6c-1.2 0-2.1-.9-2.1-2v-5.9M359.8 0c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 14.4c-3.5 0-6.4-2.9-6.4-6.4s2.9-6.4 6.4-6.4 6.4 2.9 6.4 6.4-2.9 6.4-6.4 6.4z"></path><path class="logo-mark-color" d="M361.4 6.5c0-.4-.1-.7-.4-.8-.2-.2-.6-.4-.9-.4h-1.4v2.3h1.4c.4 0 .7-.1.9-.4.2-.2.4-.4.4-.7zm-3.1 5.9h-1.5c-.1 0-.1 0-.2-.1 0-.1-.1-.1-.1-.2V3.8c0-.1 0-.1.1-.2.1 0 .1-.1.2-.1h3.3c1.1 0 1.9.2 2.5.8s.9 1.3.9 2.1c0 .6-.1 1.1-.5 1.5-.4.5-.7.8-1.2 1.1l1.9 2.9c.1.1.1.2 0 .4 0 .1-.1.1-.2.1H362c-.1 0-.2 0-.4-.1-.1 0-.1-.1-.2-.2l-1.6-2.7h-1.2V12c0 .1 0 .1-.1.2s-.1.2-.2.2z"></path></svg>
    &nbsp;
  </a>
</nav>

<nav class="navbar navbar-top navbar-expand-md navbar-light bg-white">
  <a class="navbar-brand font-weight-bold" href="http://localhost:4000/engineering/" title="GoDaddy Engineering">
    GoDaddy Engineering
  </a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#topnav" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="topnav">
    <ul class="navbar-nav ml-auto">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <li class="nav-item">
        <a class="nav-link font-weight-bold" href="http://localhost:4000/engineering/featured-projects/" title="Featured Projects">
          Featured Projects
        </a>
      </li>
      
      
      
      <li class="nav-item">
        <a class="nav-link font-weight-bold" href="http://localhost:4000/engineering/blog-posts/" title="Blog Posts">
          Blog Posts
        </a>
      </li>
      
      
      
      <li class="nav-item">
        <a class="nav-link font-weight-bold" href="http://localhost:4000/engineering/code-of-conduct/" title="Code of Conduct">
          Code of Conduct
        </a>
      </li>
      
      
      <li class="nav-item">
        <a class="nav-link btn btn-primary text-white font-weight-bold px-3" href="https://careers.godaddy.com/?source=APPLICANT_SOURCE-3-118&utm_source=godaddy-oss" title="Work at GoDaddy">
          Join us!
        </a>
      </li
    </ul>
  </div>
</nav>





<div class="container text-line-height-2x pt-3">
  <h1 class="mb-3 text-line-height-1-5-em">
    Eliminating Boilerplate and Increasing Reusability with Higher-Order Reducers
  </h1>

  <h3 id="motivation">Motivation</h3>

<p>During my internship at GoDaddy, I’ve had the opportunity to work on the Account Homepage team, a Front-End centric team working on GoDaddy’s new experience for logged in users. My team uses <a href="https://redux.js.org/">Redux</a> to manage the state of this app.</p>

<p>Most complaints about Redux are related to boilerplate code and verboseness. These complaints are well-founded, as Redux was intended to make state changes obvious, not concise. In smaller apps, this kind of code isn’t as much of a problem, but it becomes a significant time sink in large-scale apps.</p>

<p>Reducer functions were a pain point for my team. We used switch statements to write our reducers, which amounts to a lot of boilerplate. This boilerplate added up as our project progressed and we continued to add actions, so we ended up with some pretty large functions. These functions were cumbersome and often repetitive, so we decided to forego this static way of writing reducers for a more dynamic approach using higher-order reducers.</p>

<p>In this article, I’ll show a reducer written with the static approach and show you step by step how you can turn that reducer into something dynamic and concise, without losing the predictable nature of Redux state changes.</p>

<h3 id="the-static-approach">The Static Approach</h3>

<p>Below is an example of a reducer that uses the static approach. We use a switch statement to handle each action type that we expect to receive.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">fetchingDomainsAction</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'FETCHING_DOMAINS'</span><span class="p">,</span>
  <span class="na">payload</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">isFetchingDomains</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">domainsFetchedAction</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'DOMAINS_FETCHED'</span><span class="p">,</span>
  <span class="na">payload</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">isFetchingDomains</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">domains</span><span class="p">:</span> <span class="s1">'fetched'</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">domainsFetchErrorAction</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'DOMAINS_FETCH_ERROR'</span><span class="p">,</span>
  <span class="na">payload</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">isFetchingDomains</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">error</span><span class="p">:</span> <span class="s1">'fetching'</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">reducer</span> <span class="o">=</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">switch</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="na">FETCHING_DOMAINS</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
        <span class="p">...</span><span class="nx">action</span><span class="p">.</span><span class="nx">payload</span>
      <span class="p">}</span>
    <span class="k">case</span> <span class="na">DOMAINS_FETCHED</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
        <span class="p">...</span><span class="nx">action</span><span class="p">.</span><span class="nx">payload</span>
      <span class="p">}</span>
    <span class="k">case</span> <span class="na">DOMAINS_FETCH_ERROR</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
        <span class="p">...</span><span class="nx">action</span><span class="p">.</span><span class="nx">payload</span>
      <span class="p">}</span>
    <span class="nl">default</span><span class="p">:</span>
      <span class="k">return</span> <span class="nx">state</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This function by itself isn’t so bad, but the problems become exacerbated once we add more action types. The function becomes repetitious and harder to read. Even in the example above you can see that both of our action handlers are doing the same thing. This is where the dynamic approach comes into play.</p>

<h3 id="higher-order-reducers">Higher-Order Reducers</h3>

<p>We’ll address these problems with higher-order functions. We’re going to create a higher-order reducer, a function that takes in and/or returns a reducer. To begin with, we’re going to use the createReducer function that is shown in the <a href="https://redux.js.org/recipes/reducingboilerplate">Redux documentation</a>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">createReducer</span> <span class="o">=</span> <span class="p">(</span><span class="nx">intialState</span><span class="p">,</span> <span class="nx">actionHandlers</span><span class="p">)</span> <span class="o">=&gt;</span>
  <span class="p">(</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">initialState</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">actionHandlers</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">?</span>
      <span class="nx">actionHandlers</span><span class="p">[</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">](</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="p">:</span>
      <span class="nx">state</span>
</code></pre></div></div>

<p>Let’s go over what this function is doing. It takes the initial state of the app and an <code class="highlighter-rouge">actionHandlers</code> object. This object is an abstraction of the switch statement that we had before into a lookup table of handler functions. The function then returns a reducer that takes in previous state and an action. When called, this reducer will check that the <code class="highlighter-rouge">actionHandlers</code> parameter contains the received action type. If it does, the corresponding handler will get called. If not, the previous state is returned.</p>

<p>If we use this function to create the reducer shown above, we end up with this.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">reducer</span> <span class="o">=</span> <span class="nx">createReducer</span><span class="p">({},</span> <span class="p">{</span>
  <span class="p">[</span><span class="s1">'FETCHING_DATA'</span><span class="p">]:</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
    <span class="p">...</span><span class="nx">action</span><span class="p">.</span><span class="nx">payload</span>
  <span class="p">}),</span>
  <span class="p">[</span><span class="s1">'DATA_FETCHED'</span><span class="p">]:</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="p">...</span><span class="nx">state</span><span class="p">,</span> 
    <span class="p">...</span><span class="nx">action</span><span class="p">.</span><span class="nx">payload</span>
  <span class="p">}),</span>
  <span class="p">[</span><span class="s1">'FETCH_ERROR'</span><span class="p">]:</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
    <span class="p">...</span><span class="nx">action</span><span class="p">.</span><span class="nx">payload</span>
  <span class="p">})</span>
<span class="p">})</span>
</code></pre></div></div>
<p>This feels better than using a switch statement, but not by much. It still feels like boilerplate and we haven’t addressed the repetition yet. On my team, we found that the use of a default handler function to be helping in dealing with these problems.</p>

<p>Let’s adjust our <code class="highlighter-rouge">createReducer</code> function to use a default handler.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">createReducer</span> <span class="o">=</span> <span class="p">(</span><span class="nx">initialState</span><span class="p">,</span> <span class="nx">defaultHandler</span><span class="p">,</span> <span class="nx">actionTypes</span><span class="p">)</span> <span class="o">=&gt;</span>
  <span class="p">(</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">initialState</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">actionTypes</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">?</span>
      <span class="nx">defaultHandler</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="p">:</span>
      <span class="nx">state</span>
</code></pre></div></div>

<p>Now <code class="highlighter-rouge">createReducer</code> takes in the initial state, an array full of potential action types and a default handler function, which will be called by each action type in the reducer. We use an array here for concision and because it’s actually faster to use the array includes method than using a lookup table for smaller sample sizes. Using a <code class="highlighter-rouge">defaultHandler</code> makes adding an action type to a reducer is incredibly fast, all you have to do is add the new action type into your <code class="highlighter-rouge">actionTypes</code> parameter. The time needed to create the reducer has gone down, and the repetition has been elimated as well. Here’s what our reducer looks like now.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">updateState</span> <span class="o">=</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span> 
  <span class="p">...</span><span class="nx">state</span><span class="p">,</span> 
  <span class="p">...</span><span class="nx">action</span><span class="p">.</span><span class="nx">payload</span> 
<span class="p">})</span>

<span class="kd">const</span> <span class="nx">reducer</span> <span class="o">=</span> <span class="nx">createReducer</span><span class="p">({},</span> <span class="nx">updateState</span><span class="p">,</span> <span class="p">[</span>
  <span class="s1">'FETCHING_DATA'</span><span class="p">,</span>
  <span class="s1">'DATA_FETCHED'</span><span class="p">,</span>
  <span class="s1">'FETCH_ERROR'</span>
<span class="p">])</span>
</code></pre></div></div>

<p>Looks pretty good doesn’t it? Now creating a reducer is as simple as defining a handler function and providing the action types you expect to receive.</p>

<p>This is pretty cool, but there is a problem with our <code class="highlighter-rouge">createReducer</code> function in its current state. It’s only useful if the reducer that we’re creating recieves action types that all get handled the same way. We needed to find a way to let users override the <code class="highlighter-rouge">defaultHandler</code> function if they had an action that required custom handling. This allows us to eliminate repetition while also keeping our reducers flexible. Let’s check out a new version of <code class="highlighter-rouge">createReducer</code> that includes <code class="highlighter-rouge">defaultHandler</code> overriding.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">createReducer</span> <span class="o">=</span> <span class="p">(</span><span class="nx">initialState</span><span class="p">,</span> <span class="nx">defaultHandler</span><span class="p">,</span> <span class="nx">actionTypes</span><span class="p">,</span> <span class="nx">customHandlers</span><span class="p">)</span> <span class="o">=&gt;</span>
  <span class="p">(</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">initialState</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">actionTypes</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">?</span>
      <span class="nx">getActionHandler</span><span class="p">(</span><span class="nx">defaultHandler</span><span class="p">,</span> <span class="nx">customHandlers</span><span class="p">,</span> <span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="p">:</span>
      <span class="nx">state</span>

<span class="kd">const</span> <span class="nx">getActionHandler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">defaultHandler</span><span class="p">,</span> <span class="nx">customHandlers</span><span class="p">,</span> <span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span>
  <span class="nx">customHandlers</span><span class="p">[</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">](</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">||</span>
  <span class="nx">defaultHandler</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span>
</code></pre></div></div>
<p>This version of <code class="highlighter-rouge">createReducer</code> takes in an extra parameter. This customHandlers parameter is an object of handler functions that we want to override our default behavior. First, we check to see that the action type exists in our <code class="highlighter-rouge">actionTypes</code> array. If it does, we check to see if the corresponding action has a handler override in customHandlers. If it does we call it. If not, we call the <code class="highlighter-rouge">defaultHandler</code>.</p>

<p>Let’s recreate our fetching reducer using this new function. Instead of having all the actions follow the same pattern, we’re going to have the <code class="highlighter-rouge">DATA_FETCHED</code> action add the data we’ve fetched to the end of an array.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">updateState</span> <span class="o">=</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span> 
  <span class="p">...</span><span class="nx">state</span><span class="p">,</span> 
  <span class="p">...</span><span class="nx">action</span><span class="p">.</span><span class="nx">payload</span> 
<span class="p">})</span>

<span class="kd">const</span> <span class="nx">addToArray</span> <span class="o">=</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span> 
  <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">[...</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="p">...</span><span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">]</span> 
<span class="p">})</span>

<span class="kd">const</span> <span class="nx">reducer</span> <span class="o">=</span> <span class="nx">createReducer</span><span class="p">({},</span> <span class="nx">updateState</span><span class="p">,</span> <span class="p">[</span>
  <span class="s1">'FETCHING_DATA'</span><span class="p">,</span>
  <span class="s1">'FETCH_ERROR'</span><span class="p">,</span>
  <span class="s1">'DATA_FETCHED'</span>
<span class="p">],</span> <span class="p">{</span>
  <span class="na">DATA_FETCHED</span><span class="p">:</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">addToArray</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div>

<p>So now we have a reducer that handles the first two actions with our default handler and uses our special addToArray handler for the third action. This pattern is useful for large reducers that contain a lot of actions that are handled in a similar way. However, the pattern becomes less useful when you have smaller, more specialized reducers.</p>

<p>To keep repetition at a minimum when using small reducers, you need to be aware of certian patterns that can arise. For example we’ve been writing a reducer for fetching some data for this whole article. Fetching data is a pretty common pattern, and we usually have three actions to handle fetching. An action to tell us we’re fetching the data, an action to tell us we’ve fetched the data and an action to tell us that the fetching has failed. If you can identify these kind of patterns in your code, you can use the <code class="highlighter-rouge">createReducer</code> function to generalize them into reusable reducer functions.</p>

<p>As an example, let’s create a reusable fetching reducer.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Without defaultHandler */</span>
<span class="kd">const</span> <span class="nx">fetchingReducer</span> <span class="o">=</span> <span class="p">(</span><span class="nx">fetching</span><span class="p">,</span> <span class="nx">fetched</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span>
  <span class="nx">createReducer</span><span class="p">({},</span> <span class="p">{</span>
    <span class="p">[</span><span class="nx">fetching</span><span class="p">]:</span> <span class="nx">updateState</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">),</span>
    <span class="p">[</span><span class="nx">fetched</span><span class="p">]:</span> <span class="nx">updateState</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">),</span>
    <span class="p">[</span><span class="nx">error</span><span class="p">]:</span> <span class="nx">updateState</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span>
  <span class="p">})</span>

<span class="cm">/* With defaultHandler */</span>
<span class="kd">const</span> <span class="nx">fetchingReducer</span> <span class="o">=</span> <span class="p">(</span><span class="nx">fetching</span><span class="p">,</span> <span class="nx">fetched</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span>
  <span class="nx">createReducer</span><span class="p">({},</span> <span class="nx">updateState</span><span class="p">,</span> <span class="p">[</span>
    <span class="nx">fetching</span><span class="p">,</span>
    <span class="nx">fetched</span><span class="p">,</span>
    <span class="nx">error</span>
  <span class="p">])</span>
</code></pre></div></div>

<p>This function will take in the three actions that are associated with fetching data. It will then call the <code class="highlighter-rouge">createReducer</code> function and apply handlers to these actions, creating a reducer that we can use whenever we fetch any kind of data.</p>

<p>Here’s how we would use it.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">fetchingUsersAction</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'FETCHING_USERS'</span><span class="p">,</span>
  <span class="na">payload</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">isFetchingUsers</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">usersFetchedAction</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'USERS_FETCHED'</span><span class="p">,</span>
  <span class="na">payload</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">isFetchingUsers</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">users</span><span class="p">:</span> <span class="s1">'fetched'</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">usersFetchErrorAction</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'USERS_FETCH_ERROR'</span><span class="p">,</span>
  <span class="na">payload</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">isFetchingUsers</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">error</span><span class="p">:</span> <span class="s1">'fetching'</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">domains</span> <span class="o">=</span> <span class="nx">fetchingReducer</span><span class="p">(</span>
  <span class="s1">'FETCH_DOMAINS'</span><span class="p">,</span>
  <span class="s1">'DOMAINS_FETCHED'</span><span class="p">,</span>
  <span class="s1">'DOMAIN_FETCH_ERROR'</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="nx">users</span> <span class="o">=</span> <span class="nx">fetchingReducer</span><span class="p">(</span>
  <span class="s1">'FETCH_USERS'</span><span class="p">,</span>
  <span class="s1">'USERS_FETCHED'</span><span class="p">,</span>
  <span class="s1">'USER_FETCH_ERROR'</span>
<span class="p">)</span>
</code></pre></div></div>

<p>With our new, specialized <code class="highlighter-rouge">fetchingReducer</code>, we were able to create slices of state for two unrelated pieces of data by taking advantage of the fact that they follow the same pattern. If you find yourself in a position where a lot of your reducers are following similar patterns, you can use specialized reducer functions to great affect in terms of eliminating repetition in your code.</p>

<h3 id="conclusion">Conclusion</h3>

<ul>
  <li>Default handlers can make the addition of new action types to your reducers trivial if they follow the correct pattern.</li>
  <li>Higher-order reducers decrease the amount of code that you have to write, leading to fewer small mistakes being made and a less tedious experience.</li>
  <li>Higher-order reducers can be used to eliminate repetition amongst reducers with the use of specialized reducer functions like our <code class="highlighter-rouge">fetchingReducer</code> example.</li>
  <li>These functions make it possible to have concise code while maintaining the predictable quality of Redux.</li>
</ul>


  <div class="text-center mb-1">
  <div class="addthis_inline_share_toolbox"></div>
</div>

  

<hr>

<div class="authors">
  <h4 class="mb-3">
  
  Author
  
</h4>

  <div class="row">
    
    <div class="col-12">
      <div class="author mb-3">
        <a href="https://github.com/bheberer">
          <img class="rounded mr-2" src="https://avatars.githubusercontent.com/bheberer" alt="Bill Heberer" width="64">
          <span class="author-details">
            <h6>Bill Heberer</h6>
            
          </span>
        </a>
      </div>
    </div>
    
  </div>
</div>

</div>

<footer class="page-footer text-light bg-theme-grey-dark">
    <div class="container py-3">
      <div class="row">
        <div class="col-12 col-md-6">
          <h5 class="text-white text-font-headline">
            GoDaddy Engineering
          </h5>
          <p>
            At GoDaddy we build next-generation experiences that empower the world's small business owners to start and grow their independent ventures.

            <a href="https://careers.godaddy.com/?source=APPLICANT_SOURCE-3-118&utm_source=godaddy-oss" title="Work at GoDaddy">
              Join us!
            </a>
          </p>
        </div>
        <div class="col-12 col-md-4 offset-md-2">
          <h5 class="text-white text-font-headline">
            On the web
          </h5>
          <ul class="list-unstyled mb-0">
  
  
  <li>
    <a class="text-light" href="https://github.com/godaddy" title="godaddy on GitHub">
      GitHub
    </a>
  </li>
  
  
  
  <li>
    <a class="text-light" href="https://twitter.com/GodaddyOSS" title="GodaddyOSS on Twitter">
      Twitter
    </a>
  </li>
  
  
  
  <li>
    <a class="text-light" href="https://dribbble.com/GoDaddy" title="GoDaddy on Dribbble">
      Dribbble
    </a>
  </li>
  
  
  
  <li>
    <a class="text-light" href="https://www.facebook.com/GoDaddy" title="GoDaddy on Facebook">
      Facebook
    </a>
  </li>
  
  
</ul>

        </div>
      </div>
    </div>
    <div class="footer-copyright bg-extra-dark text-center text-light font-weight-light py-3">
      <small>
        Copyright © 1999 - 2018 GoDaddy Operating Company, LLC. All Rights Reserved.

      </small>
    </div>
  </footer>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>


<script async src="https://www.google-analytics.com/analytics.js"></script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js"></script>
<script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-37178807-20', 'auto');
  ga('require', 'outboundLinkTracker');
  ga('send', 'pageview');
</script>



<script async src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5b039a09ed801a5d"></script>






</body>
</html>

